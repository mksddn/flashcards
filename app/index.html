<!DOCTYPE html>
<html>

<head>

	<meta charset="utf-8">
	<!-- <base href="/"> -->

	<title>My Flashcards</title>
	<meta name="description" content="Startup HTML template OptimizedHTML 5">

	<meta name="viewport"
		content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="icon" href="images/favicon.png">
	<link rel="stylesheet" href="css/app.min.css">

</head>

<body>
	<div id="app" class="app-container">
		<div class="menu-container">
			<h1>My Flashcards</h1>
		</div>

		<div class="cards-container">
			<div v-for="card in cards" :key="card.index" ref="items" class="card-item">
				<transition name="flip">
					<div v-show="!card.flipped" @click="flipCard(card)" class="card-side">
						<div class="card-content card-front">
							<div class="card-title">
								Вопрос
							</div>
							<h2>
								{{card.frontText}}
							</h2>
						</div>
					</div>
				</transition>

				<transition name="flip">
					<div v-show="card.flipped" @click="flipCard(card)" class="card-side">
						<div class="card-content card-back">
							<div class="card-title">
								Ответ
							</div>
							<h2>
								{{card.backText}}
							</h2>
						</div>
					</div>
				</transition>
			</div>
		</div>
	</div>

	<!-- <script src="js/app.min.js"></script> -->
	<script src="js/vue.global.js"></script>

	<script>
		document.addEventListener('DOMContentLoaded', () => {

			Vue.createApp({
				data: () => ({
					cards: [{
						frontText: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Eos, quaerat!',
						backText: 'Lorem ipsum, dolor sit amet consectetur adipisicing elit. Corporis, numquam.',
						flipped: false
					},
					{
						frontText: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Maxime, animi.',
						backText: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, perspiciatis!',
						flipped: false
					},
					{
						frontText: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Eos, obcaecati!',
						backText: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam, ipsum?',
						flipped: false
					}],
					itemRefs: []
				}),

				methods: {
					flipCard: function (card) {
						card.flipped = !card.flipped;
					}
				},
				mounted() {
					this.$refs.items.forEach(ref => {
						let clr = '';
						let bgc = '';

						// let rndmClr = Math.floor(Math.random() * 0xFFFFFF << 0).toString(16)
						let rndmClr = Math.floor(Math.random() * 16777215).toString(16)

						while (rndmClr.length < 6) {
							rndmClr = Math.floor(Math.random() * 16777215).toString(16)
						}

						const red = parseInt(rndmClr.substring(0, 2), 16)
						const green = parseInt(rndmClr.substring(2, 4), 16)
						const blue = parseInt(rndmClr.substring(4, 6), 16)
						const brightness = red * 0.299 + green * 0.587 + blue * 0.114

						console.log(brightness);

						if (brightness > 180) {
							bgc = '#' + rndmClr
							clr = '#2e2e2e'
						}
						else {
							bgc = '#' + rndmClr
							clr = '#ffffff'
						}

						ref.querySelectorAll('.card-side').forEach(el => {
							el.style.backgroundColor = bgc;
							el.style.color = clr;
						});
					});
				}
			}).mount('#app');

		})
	</script>

</body>

</html>